<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jumbo Price Tracker ‚Äì Seguimiento diario de precios</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;700&family=IBM+Plex+Sans:wght@400;600;700&display=swap');
  :root {
    --bg: #0a0f0a; --surface: #111811; --border: #1e2e1e;
    --accent: #00a742; --accent2: #007a33; --red: #ef4444; --green: #22c55e;
    --text: #e2f0e2; --muted: #5a7a5a;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { background: var(--bg); color: var(--text); font-family: 'IBM Plex Sans', sans-serif; }
  header {
    background: var(--surface); border-bottom: 2px solid var(--accent2);
    padding: 1.5rem 2rem; display: flex; justify-content: space-between;
    align-items: center; flex-wrap: wrap; gap: 1rem;
  }
  .logo-area { display: flex; align-items: center; gap: 1rem; }
  .jumbo-badge {
    background: var(--accent2); color: #fff; font-weight: 700;
    padding: 0.4rem 1rem; border-radius: 8px; font-size: 1.1rem;
    letter-spacing: 0.05em; font-family: 'IBM Plex Sans', sans-serif;
  }
  header h1 { font-family: 'IBM Plex Mono', monospace; font-size: 1.1rem; color: var(--accent); }
  .fecha { font-size: 0.8rem; color: var(--muted); font-family: 'IBM Plex Mono', monospace; }
  .container { max-width: 1200px; margin: 0 auto; padding: 2rem 1rem; }
  .hero { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem; }
  .stat-card {
    background: var(--surface); border: 1px solid var(--border);
    border-radius: 12px; padding: 1.5rem; text-align: center;
    transition: border-color 0.2s;
  }
  .stat-card:hover { border-color: var(--accent2); }
  .stat-card .label { font-size: 0.72rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--muted); margin-bottom: 0.5rem; }
  .stat-card .value { font-family: 'IBM Plex Mono', monospace; font-size: 2rem; font-weight: 700; }
  .stat-card .sub { font-size: 0.8rem; color: var(--muted); margin-top: 0.3rem; }
  .section { margin-bottom: 2.5rem; }
  .section-title {
    font-family: 'IBM Plex Mono', monospace; font-size: 0.75rem;
    text-transform: uppercase; letter-spacing: 0.15em; color: var(--muted);
    margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 1px solid var(--border);
  }
  .tabs { display: flex; gap: 0.5rem; margin-bottom: 1.5rem; flex-wrap: wrap; }
  .tab {
    padding: 0.4rem 1rem; border-radius: 6px; border: 1px solid var(--border);
    background: transparent; color: var(--muted); cursor: pointer;
    font-family: 'IBM Plex Mono', monospace; font-size: 0.8rem; transition: all 0.2s;
  }
  .tab.active, .tab:hover { background: var(--accent2); color: #fff; border-color: var(--accent2); }
  .chart-container {
    background: var(--surface); border: 1px solid var(--border);
    border-radius: 12px; padding: 1.5rem; position: relative; height: 320px;
  }
  .table-wrap { overflow-x: auto; }
  table { width: 100%; border-collapse: collapse; font-size: 0.88rem; }
  th {
    background: var(--surface); padding: 0.7rem 1rem; text-align: left;
    font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.08em;
    color: var(--muted); border-bottom: 1px solid var(--border);
  }
  td { padding: 0.65rem 1rem; border-bottom: 1px solid var(--border); }
  tr:hover td { background: rgba(0,167,66,0.04); }
  .rank-num { font-family: 'IBM Plex Mono', monospace; color: var(--muted); font-size: 0.75rem; }
  .rank-tabs { display: flex; gap: 0.5rem; margin-bottom: 1rem; }
  .rank-tab {
    padding: 0.35rem 0.9rem; border-radius: 6px; border: 1px solid var(--border);
    background: transparent; color: var(--muted); cursor: pointer; font-size: 0.8rem; transition: all 0.2s;
  }
  .rank-tab.active { background: var(--surface); color: var(--text); border-color: var(--accent2); }
  .grid2 { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; }
  @media (max-width: 700px) { .grid2 { grid-template-columns: 1fr; } }
  footer {
    text-align: center; padding: 2rem; color: var(--muted);
    font-size: 0.75rem; border-top: 1px solid var(--border);
    font-family: 'IBM Plex Mono', monospace;
  }
  .info-banner {
    background: rgba(0,122,51,0.1); border: 1px solid var(--accent2);
    border-radius: 8px; padding: 0.8rem 1.2rem; margin-bottom: 1.5rem;
    font-size: 0.82rem; color: var(--accent);
  }
</style>
</head>
<body>
<header>
  <div class="logo-area">
    <div class="jumbo-badge">üêò JUMBO</div>
    <div>
      <h1>PRICE TRACKER</h1>
      <div style="color:var(--muted);font-size:0.78rem;margin-top:0.2rem">Seguimiento diario de precios ¬∑ jumbo.com.ar</div>
    </div>
  </div>
  <div class="fecha">√öltima actualizaci√≥n: 21/02/2026 13:55</div>
</header>

<div class="container">
  <div class="info-banner">
    üìä Datos relevados autom√°ticamente de <strong>jumbo.com.ar</strong> v√≠a GitHub Actions.
    Los precios pueden variar seg√∫n sucursal y disponibilidad. No afiliado con Cencosud/Jumbo.
  </div>

  <div class="hero">
    <div class="stat-card">
      <div class="label">Variaci√≥n Hoy</div>
      <div class="value" style="color:#ef4444">+0.20%</div>
      <div class="sub">58531 productos relevados</div>
    </div>
    <div class="stat-card">
      <div class="label">Variaci√≥n 30 d√≠as</div>
      <div class="value" style="color:#888">‚Äî</div>
    </div>
    <div class="stat-card">
      <div class="label">Variaci√≥n 1 a√±o</div>
      <div class="value" style="color:#888">‚Äî</div>
    </div>
    <div class="stat-card">
      <div class="label">Movimiento Hoy</div>
      <div style="display:flex;justify-content:center;gap:1rem;margin-top:0.5rem">
        <div><div style="color:#ef4444;font-size:1.3rem;font-weight:700;font-family:'IBM Plex Mono',monospace">‚¨Ü 333</div><div style="font-size:0.7rem;color:var(--muted)">Subieron</div></div>
        <div><div style="color:#22c55e;font-size:1.3rem;font-weight:700;font-family:'IBM Plex Mono',monospace">‚¨á 203</div><div style="font-size:0.7rem;color:var(--muted)">Bajaron</div></div>
        <div><div style="color:#888;font-size:1.3rem;font-weight:700;font-family:'IBM Plex Mono',monospace">‚û° 57987</div><div style="font-size:0.7rem;color:var(--muted)">Igual</div></div>
      </div>
    </div>
  </div>

  <div class="section">
    <div class="section-title">üìà Evoluci√≥n de precios</div>
    <div class="tabs">
      <button class="tab active" onclick="cambiarPeriodo('7d',this)">7 d√≠as</button>
      <button class="tab" onclick="cambiarPeriodo('30d',this)">30 d√≠as</button>
      <button class="tab" onclick="cambiarPeriodo('6m',this)">6 meses</button>
      <button class="tab" onclick="cambiarPeriodo('1y',this)">1 a√±o</button>
    </div>
    <div class="chart-container"><canvas id="chartGeneral"></canvas></div>
  </div>

  <div class="section">
    <div class="section-title">üìä Evoluci√≥n por categor√≠a</div>
    <div id="selectorCat" style="margin-bottom:1rem;display:flex;gap:0.5rem;flex-wrap:wrap"></div>
    <div class="chart-container"><canvas id="chartCat"></canvas></div>
  </div>

  <div class="section">
    <div class="section-title">üóÇ Variaci√≥n por categor√≠a ‚Äî hoy</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>Categor√≠a</th><th>Variaci√≥n %</th><th>Subieron</th><th>Bajaron</th><th>Total</th></tr></thead>
        <tbody>
        <tr>
          <td>Almac√©n</td>
          <td style="color:#ef4444;font-weight:700;font-family:'IBM Plex Mono',monospace">+0.74%</td>
          <td style="color:#ef4444">70</td>
          <td style="color:#22c55e">42</td>
          <td style="color:#888">8172</td>
        </tr>
        <tr>
          <td>Bebidas</td>
          <td style="color:#ef4444;font-weight:700;font-family:'IBM Plex Mono',monospace">+0.03%</td>
          <td style="color:#ef4444">10</td>
          <td style="color:#22c55e">16</td>
          <td style="color:#888">2457</td>
        </tr>
        <tr>
          <td>Congelados</td>
          <td style="color:#ef4444;font-weight:700;font-family:'IBM Plex Mono',monospace">+0.29%</td>
          <td style="color:#ef4444">13</td>
          <td style="color:#22c55e">2</td>
          <td style="color:#888">445</td>
        </tr>
        <tr>
          <td>L√°cteos</td>
          <td style="color:#ef4444;font-weight:700;font-family:'IBM Plex Mono',monospace">+0.89%</td>
          <td style="color:#ef4444">15</td>
          <td style="color:#22c55e">19</td>
          <td style="color:#888">1005</td>
        </tr>
        <tr>
          <td>Quesos y Fiambres</td>
          <td style="color:#ef4444;font-weight:700;font-family:'IBM Plex Mono',monospace">+0.27%</td>
          <td style="color:#ef4444">26</td>
          <td style="color:#22c55e">17</td>
          <td style="color:#888">1548</td>
        </tr>
        <tr>
          <td>Frutas y Verduras</td>
          <td style="color:#ef4444;font-weight:700;font-family:'IBM Plex Mono',monospace">+1.60%</td>
          <td style="color:#ef4444">28</td>
          <td style="color:#22c55e">39</td>
          <td style="color:#888">1101</td>
        </tr>
        <tr>
          <td>Carnes</td>
          <td style="color:#ef4444;font-weight:700;font-family:'IBM Plex Mono',monospace">+1.95%</td>
          <td style="color:#ef4444">15</td>
          <td style="color:#22c55e">2</td>
          <td style="color:#888">821</td>
        </tr>
        <tr>
          <td>Rotiseria</td>
          <td style="color:#22c55e;font-weight:700;font-family:'IBM Plex Mono',monospace">-0.60%</td>
          <td style="color:#ef4444">29</td>
          <td style="color:#22c55e">21</td>
          <td style="color:#888">193</td>
        </tr>
        <tr>
          <td>Panaderia y Pasteleria</td>
          <td style="color:#ef4444;font-weight:700;font-family:'IBM Plex Mono',monospace">+0.08%</td>
          <td style="color:#ef4444">18</td>
          <td style="color:#22c55e">16</td>
          <td style="color:#888">383</td>
        </tr>
        <tr>
          <td>Limpieza</td>
          <td style="color:#22c55e;font-weight:700;font-family:'IBM Plex Mono',monospace">-0.01%</td>
          <td style="color:#ef4444">3</td>
          <td style="color:#22c55e">7</td>
          <td style="color:#888">2155</td>
        </tr>
        <tr>
          <td>Perfumer√≠a</td>
          <td style="color:#ef4444;font-weight:700;font-family:'IBM Plex Mono',monospace">+0.14%</td>
          <td style="color:#ef4444">79</td>
          <td style="color:#22c55e">16</td>
          <td style="color:#888">3644</td>
        </tr>
        <tr>
          <td>Mascotas</td>
          <td style="color:#888;font-weight:700;font-family:'IBM Plex Mono',monospace">0.00%</td>
          <td style="color:#ef4444">0</td>
          <td style="color:#22c55e">0</td>
          <td style="color:#888">229</td>
        </tr>
        <tr>
          <td>Hogar y textil</td>
          <td style="color:#ef4444;font-weight:700;font-family:'IBM Plex Mono',monospace">+0.01%</td>
          <td style="color:#ef4444">24</td>
          <td style="color:#22c55e">0</td>
          <td style="color:#888">20704</td>
        </tr>
        <tr>
          <td>Mundo Bebe</td>
          <td style="color:#22c55e;font-weight:700;font-family:'IBM Plex Mono',monospace">-0.40%</td>
          <td style="color:#ef4444">1</td>
          <td style="color:#22c55e">6</td>
          <td style="color:#888">152</td>
        </tr>
        <tr>
          <td>Electro</td>
          <td style="color:#888;font-weight:700;font-family:'IBM Plex Mono',monospace">0.00%</td>
          <td style="color:#ef4444">2</td>
          <td style="color:#22c55e">0</td>
          <td style="color:#888">2975</td>
        </tr>
        <tr>
          <td>Tiempo Libre</td>
          <td style="color:#888;font-weight:700;font-family:'IBM Plex Mono',monospace">0.00%</td>
          <td style="color:#ef4444">0</td>
          <td style="color:#22c55e">0</td>
          <td style="color:#888">12539</td>
        </tr></tbody>
      </table>
    </div>
  </div>

  <div class="section">
    <div class="section-title">üèÜ Rankings de productos</div>
    <div class="rank-tabs">
      <button class="rank-tab active" onclick="mostrarRanking('dia',this)">üìÖ Hoy</button>
      <button class="rank-tab" onclick="mostrarRanking('mes',this)">üìÜ 30 d√≠as</button>
      <button class="rank-tab" onclick="mostrarRanking('anio',this)">üìÖ 1 a√±o</button>
    </div>
    <div class="grid2">
      <div>
        <div style="font-size:0.8rem;color:var(--muted);margin-bottom:0.7rem">üî• Los que m√°s SUBIERON</div>
        <div class="table-wrap">
          <table><thead><tr><th>#</th><th>Producto</th><th>Var %</th><th>Precio</th></tr></thead>
          <tbody id="tabla-sube"></tbody></table>
        </div>
      </div>
      <div>
        <div style="font-size:0.8rem;color:var(--muted);margin-bottom:0.7rem">üìâ Los que m√°s BAJARON hoy</div>
        <div class="table-wrap">
          <table><thead><tr><th>#</th><th>Producto</th><th>Var %</th><th>Precio</th></tr></thead>
          <tbody id="tabla-baja"></tbody></table>
        </div>
      </div>
    </div>
  </div>
</div>

<footer>
  Datos relevados de jumbo.com.ar ¬∑ Actualizaci√≥n autom√°tica diaria via GitHub Actions<br>
  JUMBOBOT no est√° afiliado con Cencosud S.A. ¬∑ Uso educativo y de transparencia de precios
</footer>

<script>
const GRAFICOS   = {"7d": {"total": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.2}], "categorias": {"Almac√©n": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.74}], "Bebidas": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.03}], "Congelados": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.29}], "L√°cteos": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.89}], "Quesos y Fiambres": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.27}], "Frutas y Verduras": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 1.6}], "Carnes": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 1.95}], "Rotiseria": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": -0.6}], "Panaderia y Pasteleria": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.08}], "Limpieza": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": -0.01}], "Perfumer√≠a": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.14}], "Mascotas": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.0}], "Hogar y textil": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.01}], "Mundo Bebe": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": -0.4}], "Electro": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.0}], "Tiempo Libre": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.0}]}}, "30d": {"total": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.2}], "categorias": {"Almac√©n": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.74}], "Bebidas": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.03}], "Congelados": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.29}], "L√°cteos": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.89}], "Quesos y Fiambres": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.27}], "Frutas y Verduras": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 1.6}], "Carnes": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 1.95}], "Rotiseria": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": -0.6}], "Panaderia y Pasteleria": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.08}], "Limpieza": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": -0.01}], "Perfumer√≠a": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.14}], "Mascotas": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.0}], "Hogar y textil": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.01}], "Mundo Bebe": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": -0.4}], "Electro": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.0}], "Tiempo Libre": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.0}]}}, "6m": {"total": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.2}], "categorias": {"Almac√©n": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.74}], "Bebidas": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.03}], "Congelados": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.29}], "L√°cteos": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.89}], "Quesos y Fiambres": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.27}], "Frutas y Verduras": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 1.6}], "Carnes": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 1.95}], "Rotiseria": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": -0.6}], "Panaderia y Pasteleria": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.08}], "Limpieza": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": -0.01}], "Perfumer√≠a": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.14}], "Mascotas": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.0}], "Hogar y textil": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.01}], "Mundo Bebe": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": -0.4}], "Electro": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.0}], "Tiempo Libre": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.0}]}}, "1y": {"total": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.2}], "categorias": {"Almac√©n": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.74}], "Bebidas": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.03}], "Congelados": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.29}], "L√°cteos": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.89}], "Quesos y Fiambres": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.27}], "Frutas y Verduras": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 1.6}], "Carnes": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 1.95}], "Rotiseria": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": -0.6}], "Panaderia y Pasteleria": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.08}], "Limpieza": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": -0.01}], "Perfumer√≠a": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.14}], "Mascotas": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.0}], "Hogar y textil": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.01}], "Mundo Bebe": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": -0.4}], "Electro": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.0}], "Tiempo Libre": [{"fecha": "2026-02-20", "pct": 0.0}, {"fecha": "2026-02-21", "pct": 0.0}]}}};
const RANK_DIA   = [{"sku_id": "294962", "nombre": "Syrup Hersheys Chocolate Botella 680gr", "marca": "HERSHEYS", "categoria": "Pasteler√≠a", "precio_hoy": 26831.29, "precio_ref": 446.79, "diff_pct": 5905.347031043667}, {"sku_id": "1157", "nombre": "Champignon Frescos Buy&eat 200 Gr", "marca": "BUY & EAT", "categoria": "Verduras Empaquetadas", "precio_hoy": 89969.95, "precio_ref": 6299.0, "diff_pct": 1328.3211620892205}, {"sku_id": "330635", "nombre": "Tapas Empanadas Hojaldre 12 Un Cuisine & Co", "marca": "Cuisine & CO", "categoria": "Tapas", "precio_hoy": 19626.19, "precio_ref": 1890.0, "diff_pct": 938.4227513227513}, {"sku_id": "33076", "nombre": "Peceto Entero Premium La Hacienda", "marca": "LA HACIENDA", "categoria": "La Hacienda Premium", "precio_hoy": 37499.0, "precio_ref": 9459.49, "diff_pct": 296.4167201403036}, {"sku_id": "10336", "nombre": "Zanahoria Song 200 Gr", "marca": "SONG", "categoria": "Verduras Procesadas y Ensaladas Listas", "precio_hoy": 2999.0, "precio_ref": 998.89, "diff_pct": 200.23325891739833}, {"sku_id": "29317", "nombre": "Ensalada Jardin So", "marca": "SONG", "categoria": "Verduras Procesadas y Ensaladas Listas", "precio_hoy": 2999.0, "precio_ref": 998.99, "diff_pct": 200.20320523728964}, {"sku_id": "247580", "nombre": "Vacio", "marca": "LA HACIENDA", "categoria": "Novillito Especial", "precio_hoy": 34109.0, "precio_ref": 11929.19, "diff_pct": 185.92888536438764}, {"sku_id": "247560", "nombre": "Osobuco", "marca": "LA HACIENDA", "categoria": "Novillito Especial", "precio_hoy": 10915.0, "precio_ref": 3827.93, "diff_pct": 185.14105534845206}, {"sku_id": "5346", "nombre": "Roast Beef Trozo", "marca": "LA HACIENDA", "categoria": "Novillito Especial", "precio_hoy": 16655.0, "precio_ref": 5999.99, "diff_pct": 177.5837959729933}, {"sku_id": "10395", "nombre": "Papa Fraccionada Por Kg", "marca": "VERDULERIA PROPIA", "categoria": "Verduras Empaquetadas", "precio_hoy": 1924.25, "precio_ref": 699.0, "diff_pct": 175.28612303290413}, {"sku_id": "247573", "nombre": "Bife De Chorizo", "marca": "LA HACIENDA", "categoria": "Novillito Especial", "precio_hoy": 30619.0, "precio_ref": 11622.39, "diff_pct": 163.4483957258361}, {"sku_id": "246973", "nombre": "Paleta Churrasco", "marca": "LA HACIENDA", "categoria": "Novillito Especial", "precio_hoy": 17005.0, "precio_ref": 7022.47, "diff_pct": 142.1512658651443}, {"sku_id": "336123", "nombre": "Toallas Humedas Huggies Triple Prot X96", "marca": "HUGGIES", "categoria": "Higiene del Beb√©", "precio_hoy": 8300.0, "precio_ref": 3600.0, "diff_pct": 130.55555555555557}, {"sku_id": "5123", "nombre": "Paleta Trozo", "marca": "LA HACIENDA", "categoria": "Novillito", "precio_hoy": 15269.0, "precio_ref": 6917.49, "diff_pct": 120.73035161597632}, {"sku_id": "32414", "nombre": "Brotes De Alfalfa", "marca": "SUE√ëO VERDE", "categoria": "Verduras Procesadas y Ensaladas Listas", "precio_hoy": 9998.95, "precio_ref": 4799.0, "diff_pct": 108.35486559699939}, {"sku_id": "31677", "nombre": "Pizza De Muzzarella X 1 Un Pizza De Muzzarella X 1 U", "marca": "JUMBO ARTESANAL", "categoria": "Pizzas y Focaccias", "precio_hoy": 8000.0, "precio_ref": 4125.49, "diff_pct": 93.91635902644293}, {"sku_id": "32834", "nombre": "Matambre Premium La Hacienda", "marca": "LA HACIENDA", "categoria": "La Hacienda Premium", "precio_hoy": 30199.0, "precio_ref": 15821.79, "diff_pct": 90.86968035854349}, {"sku_id": "27415", "nombre": "Chorizo Puro Cerdo Al Vacio - 4 U - 320 Grs - Doina", "marca": "DOINA", "categoria": "Chorizos", "precio_hoy": 6599.0, "precio_ref": 3470.63, "diff_pct": 90.13838986005422}, {"sku_id": "5131", "nombre": "Asado De Novillito Gondola Bandeja", "marca": "LA HACIENDA", "categoria": "Novillito", "precio_hoy": 11449.0, "precio_ref": 6124.99, "diff_pct": 86.92275415959864}, {"sku_id": "41191", "nombre": "Ensalada Salanova Con Escarola Buy&eat", "marca": "BUY & EAT", "categoria": "Verduras Procesadas y Ensaladas Listas", "precio_hoy": 9999.99, "precio_ref": 5399.0, "diff_pct": 85.21929987034636}];
const RANK_MES   = [];
const RANK_ANIO  = [];
const RANK_BAJA  = [{"sku_id": "148526", "nombre": "Endivias Flamingo 300 Gr", "marca": "FLAMINGO", "categoria": "Verduras Empaquetadas", "precio_hoy": 7799.0, "precio_ref": 100031.57, "diff_pct": -92.20346136724636}, {"sku_id": "394949", "nombre": "Jabon Huggies 75g", "marca": "HUGGIES", "categoria": "Higiene del Beb√©", "precio_hoy": 2050.0, "precio_ref": 17200.0, "diff_pct": -88.0813953488372}, {"sku_id": "330894", "nombre": "Galletita Tita Cl√°sica 19 Gr", "marca": "TITA", "categoria": "Bocaditos y Postres", "precio_hoy": 1150.0, "precio_ref": 5250.0, "diff_pct": -78.0952380952381}, {"sku_id": "2467", "nombre": "Baguette De Salvado Elaboracion local Baguette De Salvado", "marca": "LA PANADERIA", "categoria": "Panificados", "precio_hoy": 344.99, "precio_ref": 1400.0, "diff_pct": -75.35785714285714}, {"sku_id": "10382", "nombre": "Ensalada Nutritiva Song 250 Gr", "marca": "SONG", "categoria": "Verduras Procesadas y Ensaladas Listas", "precio_hoy": 2999.0, "precio_ref": 10002.29, "diff_pct": -70.01686613765447}, {"sku_id": "20405", "nombre": "Ensalada Oriental Song 500 Gr", "marca": "SONG", "categoria": "Verduras Procesadas y Ensaladas Listas", "precio_hoy": 3199.0, "precio_ref": 9996.99, "diff_pct": -68.00036811080135}, {"sku_id": "19826", "nombre": "R√∫cula Roco 1 U", "marca": "ROCO", "categoria": "Verduras Empaquetadas", "precio_hoy": 3799.0, "precio_ref": 10001.77, "diff_pct": -62.016723040021915}, {"sku_id": "167899", "nombre": "Zapallito Largo Por Kg", "marca": "VERDULERIA PROPIA", "categoria": "Hortalizas Livianas", "precio_hoy": 1599.0, "precio_ref": 3899.99, "diff_pct": -58.999894871525306}, {"sku_id": "31773", "nombre": "Asado Del Centro De Novillito Por Kg", "marca": "SIN MARCA", "categoria": "Novillito", "precio_hoy": 9602.76, "precio_ref": 22569.0, "diff_pct": -57.45154858434135}, {"sku_id": "15998", "nombre": "Medallon De Bife De Chorizo Premium", "marca": "LA HACIENDA", "categoria": "La Hacienda Premium", "precio_hoy": 20872.69, "precio_ref": 41499.0, "diff_pct": -49.70314947348129}];
const CATS_DEFAULT = ["Almac\u00e9n", "Bebidas", "Congelados", "L\u00e1cteos", "Quesos y Fiambres", "Frutas y Verduras", "Carnes", "Rotiseria", "Panaderia y Pasteleria", "Limpieza", "Perfumer\u00eda", "Mascotas", "Hogar y textil", "Mundo Bebe", "Electro", "Tiempo Libre"];

let chartGeneral = null, chartCat = null, catActual = null;

function cambiarPeriodo(periodo, btn) {
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  btn.classList.add('active');
  renderChartGeneral(periodo);
  renderSelectorCats(periodo);
}

function renderChartGeneral(periodo) {
  const datos = GRAFICOS[periodo]?.total || [];
  if (chartGeneral) chartGeneral.destroy();
  const ctx = document.getElementById('chartGeneral').getContext('2d');
  chartGeneral = new Chart(ctx, {
    type: 'line',
    data: {
      labels: datos.map(d => d.fecha),
      datasets: [{ label: 'Variaci√≥n acumulada %', data: datos.map(d => d.pct),
        borderColor: '#00a742', backgroundColor: 'rgba(0,167,66,0.08)',
        borderWidth: 2, pointRadius: datos.length > 60 ? 0 : 3, tension: 0.3, fill: true }]
    },
    options: {
      responsive: true, maintainAspectRatio: false,
      plugins: { legend: { display: false } },
      scales: {
        x: { ticks: { color: '#5a7a5a', maxTicksLimit: 8 }, grid: { color: '#1e2e1e' } },
        y: { ticks: { color: '#5a7a5a', callback: v => (v>0?'+':'')+v.toFixed(1)+'%' },
              grid: { color: '#1e2e1e' },
              afterDataLimits: a => { if(a.min>0)a.min=0; if(a.max<0)a.max=0; } }
      }
    }
  });
}

function renderSelectorCats(periodo) {
  const catsJSON = Object.keys(GRAFICOS[periodo]?.categorias || {});
  const cats = catsJSON.length ? catsJSON : CATS_DEFAULT;
  const cont = document.getElementById('selectorCat');
  cont.innerHTML = '';
  if (!catActual || !cats.includes(catActual)) catActual = cats[0];
  cats.forEach(cat => {
    const btn = document.createElement('button');
    btn.className = 'tab' + (cat === catActual ? ' active' : '');
    btn.textContent = cat;
    btn.onclick = () => {
      catActual = cat;
      document.querySelectorAll('#selectorCat .tab').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      renderChartCat(periodo, cat);
    };
    cont.appendChild(btn);
  });
  renderChartCat(periodo, catActual);
}

function renderChartCat(periodo, cat) {
  const datos = GRAFICOS[periodo]?.categorias?.[cat] || [];
  if (chartCat) chartCat.destroy();
  const ctx = document.getElementById('chartCat').getContext('2d');
  chartCat = new Chart(ctx, {
    type: 'line',
    data: {
      labels: datos.map(d => d.fecha),
      datasets: [{ label: cat + ' ‚Äî variaci√≥n %', data: datos.map(d => d.pct),
        borderColor: '#34d399', backgroundColor: 'rgba(52,211,153,0.08)',
        borderWidth: 2, pointRadius: datos.length > 60 ? 0 : 3, tension: 0.3, fill: true }]
    },
    options: {
      responsive: true, maintainAspectRatio: false,
      plugins: { legend: { display: false } },
      scales: {
        x: { ticks: { color: '#5a7a5a', maxTicksLimit: 8 }, grid: { color: '#1e2e1e' } },
        y: { ticks: { color: '#5a7a5a', callback: v => (v>0?'+':'')+v.toFixed(1)+'%' },
              grid: { color: '#1e2e1e' },
              afterDataLimits: a => { if(a.min>0)a.min=0; if(a.max<0)a.max=0; } }
      }
    }
  });
}

function mostrarRanking(periodo, btn) {
  document.querySelectorAll('.rank-tab').forEach(t => t.classList.remove('active'));
  btn.classList.add('active');
  const data = {dia:RANK_DIA, mes:RANK_MES, anio:RANK_ANIO}[periodo] || [];
  renderTablaRanking('tabla-sube', data, false);
  if (periodo==='dia') renderTablaRanking('tabla-baja', RANK_BAJA, true);
  else document.getElementById('tabla-baja').innerHTML = '<tr><td colspan="4" style="color:var(--muted);text-align:center;padding:1rem">Solo disponible para hoy</td></tr>';
}

function renderTablaRanking(id, data, esBaja) {
  const tbody = document.getElementById(id);
  if (!data.length) {
    tbody.innerHTML = '<tr><td colspan="4" style="color:var(--muted);text-align:center;padding:1rem">Sin datos a√∫n ‚Äî el tracker necesita al menos 2 d√≠as de datos</td></tr>';
    return;
  }
  tbody.innerHTML = data.slice(0,20).map((p,i) => {
    const color = esBaja ? '#22c55e' : '#ef4444';
    const signo = p.diff_pct > 0 ? '+' : '';
    const nombre = (p.nombre||'').substring(0,35);
    const precio = p.precio_hoy ? '$'+Number(p.precio_hoy).toLocaleString('es-AR') : '‚Äî';
    return `<tr>
      <td class="rank-num">${i+1}</td>
      <td title="${p.nombre}"><div>${nombre}</div><div style="font-size:0.7rem;color:var(--muted)">${p.marca||''} ¬∑ ${(p.categoria||'').substring(0,20)}</div></td>
      <td style="color:${color};font-weight:700;font-family:'IBM Plex Mono',monospace">${signo}${p.diff_pct?.toFixed(1)}%</td>
      <td style="font-family:'IBM Plex Mono',monospace;font-size:0.82rem">${precio}</td>
    </tr>`;
  }).join('');
}

renderChartGeneral('7d');
renderSelectorCats('7d');
mostrarRanking('dia', document.querySelector('.rank-tab'));
</script>
</body>
</html>